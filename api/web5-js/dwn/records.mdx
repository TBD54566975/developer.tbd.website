# records

## Overview
The `records` class is responsible for providing convenience methods for CRUD operations interfacing with DWNs.

## Data Types

### Record

Every modifying method of the `records` class returns and instance of a `Record` object, which is a representation fo the record(s) involved in the operation. 

#### Properties

`id`

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The unique identifier based on the record entry's composition. Note: all entries across all records are deterministically unique.

`descriptor`

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The descriptor object for the constructed DWN message.

`data`

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An object with the following methods available on it:
- `text()` - produces a textual representation of the data.
- `json()` - if the value is JSON data, this method will return a parsed JSON object.
- `stream()` - returns the raw stream of bytes for the data.

`send(did)`

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sends a given record to the specified `did`.

`delete(id)`

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Generates a `delete` etnry tombstone for the record. This is a convenience method that allows you to easily delete records.

`update()`

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Takes in a new request object matching the expected method signature of a `write` and overwrites the record.


## Methods

### query(request)

Method for querying the DWN of a provided `target`.

#### Parameters

`request`

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `from`: The DID to query from.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `author`: The DID of the author signing the query. This may be the same as the `target` parameter if the `target` and the signer of the query are the same entity, which is common for an app querying the DWN of its own user.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `message`: An object describing the properties of the DWN descriptor used to construct a valid DWN message.

#### Returns

The response object of the query.

#### Code Example
```js
const response = await web5.dwn.records.query({
  from: 'did:example:alice',
  message: {
    filter: {
      schema: 'https://schema.org/Playlist',
      dataFormat: 'application/json'
    }
  }
});
```

### create(request)

Method for writing a record to the DWN of a specified DID.

#### Parameters

`request`

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  `from` - The DID of the author signing the query. This may be the same as the `target` parameter if the `target` and the signer of the query are the same entity, which is common for an app querying the DWN of its own user.
- `message` - An object describing the properties of the DWN descriptor used to construct a valid DWN message.
- `store` - A `boolean` specifying whether the `create` function should record the data in the user's DWN.
- `data` - the data object of the bytes, stream, blob, or file to be sent.

#### Returns

The response object of the query.

#### Code Example
```js
const { record } = await web5.dwn.records.create({
  data: 'Hello, world!',
  message: {
    recipient: 'did:example:alice'
    schema: 'message',
    dataFormat: 'text/plain',
    protocol: 'social-media',
  },
});
```

### write(request)

Method for writing a record to the DWN of a provided `target`.

#### Parameters

`request`

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `from`: The DID of the author signing the query. This may be the same as the `target` parameter if the `target` and the signer of the query are the same entity, which is common for an app querying the DWN of its own user.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `message`: An object describing the properties of the DWN descriptor used to construct a valid DWN message.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`data`: the data object of the bytes, stream, blob, or file to be sent.

#### Returns

The response object of the query.

#### Code Example
```js
const { record } = await web5.dwn.records.write({
  from: 'did:example:alice',
  data: 'Hello again!',
  message: {
    recordId: record.recordId,
    dataFormat: 'text/plain'
  }
});
```

### delete(target, request)

Method for reading a record to the DWN of a provided `target`.

#### Parameters

`request`

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`from`: The DID of the author signing the query. This may be the same as the `target` parameter if the `target` and the signer of the query are the same entity, which is common for an app querying the DWN of its own user.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`message`: An object describing the properties of the DWN descriptor used to construct a valid DWN message.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `recordId`: The `recordId` you are fetching.

#### Returns

The response object of the query.

#### Code Example
```js
const response = await web5.dwn.records.delete({
  from: 'did:example:alice',
  message: {
    recordId: 'bfw35evr6e54c4cqa4c589h4cq3v7w4nc534c9w7h5'
  }
});
```