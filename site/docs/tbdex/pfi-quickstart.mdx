---
sidebar_position: 2
title: 'Quickstart: PFI'
hide_title: true
hide_table_of_contents: false
---

import { QuickstartExecutionProvider } from '@site/src/components/QuickstartExecutionContext';
import Version from '@site/src/components/Version';
import PackageJson from '@site/src/components/PackageJson';
import CodeSnippet from '@site/src/components/CodeSnippet';
import PfiQuickstartCodeRunner from '@site/src/components/PfiQuickstartCodeRunner';

<QuickstartExecutionProvider>

# tbDEX PFI in 5️⃣ Minutes

## Overview

A [Participating Financial Institution (PFI)](/docs/tbdex/pfi/overview) in the tbDEX ecosystem provides liquidity offerings to customers via [Wallets](/docs/tbdex/wallet/overview), allowing eligible customers to place orders and execute transactions.

**In this quickstart, you'll:**

✅  Set up a basic PFI with `Offerings`

✅  Open endpoints for tbDEX-enabled Wallets

✅  Process Requests for `Quote` and respond with Quotes

✅  Handle Orders, provide `OrderStatus` updates, and close out Orders

Let's get started!

## Building a Simple PFI

### Create a DID

PFIs on tbDEX are identified using [Decentralized Identifiers (DIDs)](/docs/web5/decentralized-identifiers/what-are-dids). Let's create a DID for your PFI and specify a service endpoint for wallet applications to interact with your PFI:

<CodeSnippet snippetName="pfiOverviewCreateDid" />
<PfiQuickstartCodeRunner executeCodeName="executeDidCreate" stepIndex={0} customPlaceholder={"See PFI DID"} />

### Structure Your PFI App
To operate as a PFI on the tbDEX network, you'll need a server that handles incoming requests, a database that holds Offerings and Exchanges, and implementations of the OfferingsApi and ExchangesApi. We'll spare you the details in this Quickstart, however, for more info, check out the guide on [Structuring a PFI App](/docs/tbdex/pfi/anatomy-of-a-pfi).

### Fetching Offerings for Wallets
With your database populated with Offerings and the OfferingsApi set up, Wallet applications can now call `TbdexHttpClient.getOfferings()` to obtain a list of the currency conversions you offer and the requirements to transact.

<PfiQuickstartCodeRunner executeCodeName="executeGetOfferings" stepIndex={1} customPlaceholder={"Fetch offerings from the PFI Endpoint"} viewJsonObj={true} collapseLevel={3} />

## Process tbDEX Messages

PFIs and Wallet applications exchange messages to facilitate transactions. These standardized message types include `Request for Quote (RFQ)`, `Quote`, `Order`, `OrderStatus`, and `Close`. Let's walk through the process of handling these messages.

### Process RFQs and return Quotes

When a customer selects an offering, they make a `RFQ` (Request for Quote) that includes the methods of payment they'd prefer and the credentials that match the `requiredClaims` of the Offering. Using this submitted data, your PFI generates a `Quote` that you will also write to your database:

<CodeSnippet snippetName="pfiCreateQuoteJs" title="exchangeApiProvider.ts" />
<PfiQuickstartCodeRunner executeCodeName="executeGetQuote" stepIndex={2} customPlaceholder={"See the Quote"} viewJsonObj={true} collapseLevel={3} />

### Receive Orders and Return OrderStatus

The customer has accepted the `Quote` and places an `Order`. Let's process accepted quotes, manage orders, and send `OrderStatus` updates:

<CodeSnippet snippetName="pfiOrderStatusJs" title="exchangeApiProvider.ts" />
<PfiQuickstartCodeRunner executeCodeName="executeGetOrderStatus" stepIndex={3} customPlaceholder={"See the OrderStatus"} viewJsonObj={true} collapseLevel={3} />

### Close Out Orders

Once the `Order` is completed (whether that means fulfilled or cancelled), you close the exchange with a `Close` message which can optionally include a `reason` and a `success` indicator:

<CodeSnippet snippetName="pfiCloseOrderJs" title="exchangeApiProvider.ts" />
<PfiQuickstartCodeRunner executeCodeName="executeGetClose" stepIndex={4} customPlaceholder={"See the Close Message"} viewJsonObj={true} collapseLevel={3} />

## Next Steps with tbDEX

Congratulations on building your first PFI! To explore further, check out the full [PFI guide](/docs/tbdex/pfi/overview).


</QuickstartExecutionProvider>
