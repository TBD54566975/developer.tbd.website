---
sidebar_position: 6
---

# Offerings

Offerings describe a currency pair that can be exchanged and specify the requirements, conditions, and constraints needed to fulfill the described swap. In other words, an Offering is a way of describing a financial product you’re offering as a PFI on a tbDEX network. Any Wallet that has your PFI's DID will be able to query your PFI for all available Offerings, as well as fetch specific Offerings. Wallets will then use that data to make an Request for Quote (RFQ) to your PFI to begin a potential transaction process.

## Offering Data Schema

At a top-level, the Offering data object is described by the following properties:

* Currency pairings for the swap
* Pay-in methods
* Pay-out methods
* Pay-out conversion
* Required credentials

To define these parameters, you’ll create a JSON object per the [Offering schema](https://github.com/TBD54566975/tbdex/tree/main/specs/protocol#offering):


<table>
  <tr>
   <td><strong>Offering Trait</strong>
   </td>
   <td><strong>tbDEX Field</strong>
   </td>
   <td><strong>Data Type</strong>
   </td>
  </tr>
  <tr>
   <td>Currency Pairing for swap
   </td>
   <td>payinCurrency and payoutCurrency
   </td>
   <td>CurrencyDetails
   </td>
  </tr>
  <tr>
   <td>Pay-in Method
   </td>
   <td>payinMethods
   </td>
   <td>PaymentMethod[]
   </td>
  </tr>
  <tr>
   <td>Pay-out Method
   </td>
   <td>payoutMethods
   </td>
   <td>PaymentMethods[]
   </td>
  </tr>
  <tr>
   <td>Pay-out Conversion
   </td>
   <td>payoutUnitsPerPayinUnit
   </td>
   <td>string
   </td>
  </tr>
  <tr>
   <td>Required Credentials
   </td>
   <td>requiredClaims
   </td>
   <td>PresentationDefinitionV2
   </td>
  </tr>
</table>

### Currencies

Both the `payinCurrency` and `payoutCurrency` fields are described by the [`CurrencyDetails`](https://github.com/TBD54566975/tbdex/tree/main/specs/protocol#currencydetails) data type, which has the following fields:

| Field        | Data Type | Description                                            |
|--------------|-----------|--------------------------------------------------------|
| `currencyCode` | string    | ISO 4217 currency code string. This field is required. |
| `minSubunits`  | string    | Minimum amount of currency that the offer is valid for |
| `maxSubunits`  | string    | Maximum amount of currency that the offer is valid for |

To find more information on currency code strings to ensure your PFI uses a valid and correct value, see the [currency lists provided here](https://www.six-group.com/en/products-services/financial-information/data-standards.html).

### Payment Methods

Both the `payinMethods` and `payoutMethods` field are described by the [`PaymentMethod`](https://github.com/TBD54566975/tbdex/blob/main/specs/protocol/README.md#paymentmethod) data type, which has the following fields:

| Field                    | Data Type | Description                                                                                                                                                             |
|--------------------------|-----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `kind`                   | string    | Type of payment method (i.e. `DEBIT_CARD`, `CREDIT_CARD`, etc.). Note that because this field is of type string, the values are not standardized. This field is required. |
| `requiredPaymentDetails` | JSON      | A JSON schema containing the fields the Wallet must enter in order to use this payment method. This field is not enforced as required despite its name.                 |
| `required`               | string[]  | A list of all the properties described `requiredPaymentDetails`.                                                                                                        |
| `feeSubunits`            | string    | The fee expressed in the currency's sub units to make use of this payment method.                                                                                       |

When structuring your `requiredPaymentDetails` object, it will look similar to the following:

```json
{
  "requiredPaymentDetails": {
    "$schema": "http://json-schema.org/draft-07/schema",
    "type": "object",
    "properties": {
      "property1": {
        "type": "string",
        "description": "A description of the first property",
        "property1MaxLength": 16,
      },
      "property2": {
        "type": "string",
        "description": "A description of the first property",
        "patternToMatch": "^(0[1-9]|1[0-2])\\/([0-9]{2})$"
      }
    }
  }
}
```
Note that the while `type` and `description` fields are more intuitive and standard for you to include in your `requiredPaymentDetails` schema, you have the flexibility to detail any requirements you have in this object. Each `payinMethod` or `payoutMethod` can be represented by an array of `PaymentMethods`.

### Credentials and Claims

Before placing an Offer on an RFQ that a Wallet has submitted for your Offering, you'll likely want to verify some kind of information about the owner of that Wallet. To do this, you'll request a claim or claims from the Wallet in the form of [Verifiable Credentials (VCs)](/docs/web5/learn/verifiable-credentials). As a PFI, you only require specific knowledge of the VCs you need and how to request them; however if you'd like to learn more about [issuing](/docs/web5/build/verifiable-credentials/vc-issuance), [sharing](/docs/web5/build/verifiable-credentials/jwt-to-vc), and [storing](/docs/web5/build/verifiable-credentials/vcs-in-dwn) VCs, you can do so at each link. Additionally, you can learn about [building an end-to-end VC workflow here](/docs/web5/build/verifiable-credentials/fan-club-vc) if interested.

You will specify the `requiredClaims` of your Offering by following [the DIF Presentation Definition](https://identity.foundation/presentation-exchange/#presentation-definition) - a way of defining what proof you as a Verifier require. You'll specify all required forms and details of proof, optional selection rules, and define flexibility where possible when different types of input may satisfy the requirements.

For a full breakdown of all the available fields and combinations, [see the DIF website](https://identity.foundation/presentation-exchange/#presentation-definition) for details. Below is a simple example of what a single required claim object could look like:

```json
{
  "comment": "Note: VP, OIDC, DIDComm, or CHAPI outer wrapper would be here.",
  "presentation_definition": {
    "id": "32f54163-7166-48f1-93d8-ff217bdb0653",
    "input_descriptors": [
      {
        "id": "wa_driver_license",
        "name": "Washington State Business License",
        "purpose": "We can only allow licensed Washington State business representatives into the WA Business Conference",
        "constraints": {
          "fields": [
            {
              "path": [
                "$.credentialSubject.dateOfBirth",
                "$.credentialSubject.dob",
                "$.vc.credentialSubject.dateOfBirth",
                "$.vc.credentialSubject.dob"
              ]
            }
          ]
        }
      }
    ]
  }
}
```

## Sample Offering

When combining all the data above, you can end up with a full Offering object that looks something like the following:

```json
{
  "metadata": {
    "from": "did:ex:pfi",
    "kind": "offering",
    "id": "offering_01ha82y8d0fhstg95hhfjwmgxf",
    "createdAt": "2023-09-13T20:15:22.528Z"
  },
  "data": {
    "description": "Selling BTC for USD",
    "payinCurrency": {
      "currencyCode": "USD"
    },
    "payoutCurrency": {
      "currencyCode": "BTC",
      "maxSubunits": "99952611"
    },
    "payoutUnitsPerPayinUnit": "0.00003826",
    "payinMethods": [
      {
        "kind": "DEBIT_CARD",
        "requiredPaymentDetails": {
          "$schema": "http://json-schema.org/draft-07/schema",
          "type": "object",
          "properties": {
            "cardNumber": {
              "type": "string",
              "description": "The 16-digit debit card number",
              "minLength": 16,
              "maxLength": 16
            },
            "expiryDate": {
              "type": "string",
              "description": "The expiry date of the card in MM/YY format",
              "pattern": "^(0[1-9]|1[0-2])\\/([0-9]{2})$"
            },
            "cardHolderName": {
              "type": "string",
              "description": "Name of the cardholder as it appears on the card"
            },
            "cvv": {
              "type": "string",
              "description": "The 3-digit CVV code",
              "minLength": 3,
              "maxLength": 3
            }
          },
          "required": [
            "cardNumber",
            "expiryDate",
            "cardHolderName",
            "cvv"
          ],
          "additionalProperties": false
        }
      }
    ],
    "payoutMethods": [
      {
        "kind": "BTC_ADDRESS",
        "requiredPaymentDetails": {
          "$schema": "http://json-schema.org/draft-07/schema",
          "type": "object",
          "properties": {
            "btcAddress": {
              "type": "string",
              "description": "your Bitcoin wallet address"
            }
          },
          "required": [
            "btcAddress"
          ],
          "additionalProperties": false
        }
      }
    ],
    "requiredClaims": {
      "id": "7ce4004c-3c38-4853-968b-e411bafcd945",
      "input_descriptors": [
        {
          "id": "bbdb9b7c-5754-4f46-b63b-590bada959e0",
          "constraints": {
            "fields": [
              {
                "path": [
                  "$.type"
                ],
                "filter": {
                  "type": "string",
                  "const": "YoloCredential"
                }
              }
            ]
          }
        }
      ]
    }
  },
  "signature": "eyJhbGciOiJFZERTQSIsImtpZCI6ImRpZDprZXk6ejZNa2syc1QyZUtvQWdUUTdzWjY3YTdmRDMzR21jYzZ1UXdaYmlxeWF5Rk1hYkhHI3o2TWtrMnNUMmVLb0FnVFE3c1o2N2E3ZkQzM0dtY2M2dVF3WmJpcXlheUZNYWJIRyJ9..9EBTL3VcajsQzSNOm8GElhcwvYcFGaRp24FTwmC845RCF84Md-ZB-CxdCo7kEjzsAY8OaB55XFSH_8K9vedhAw"
}
```

Once the Offering has been generated, you can store it in your database using code as shown in the [Exchange API Provider section](/docs/tbdex/pfi/anatomy-of-a-pfi#exchange-api-provider).