---
sidebar_position: 9
---

import CodeSnippet from '@site/src/components/CodeSnippet';

# Using Identity Agents

[Agents](https://developer.tbd.website/docs/web5/learn/agents/) manage [DIDs](https://developer.tbd.website/docs/web5/learn/decentralized-identifiers), data, and communication between [DWNs](https://developer.tbd.website/docs/web5/learn/decentralized-web-nodes). Identity Agents are a type of agent that specialize in managing multiple decentralized identities, making it easier to use existing identities across various Web5 applications.

While the `Web5.connect()` function creates a local User Agent and a **new** identity, Identity Agents allow you to connect a web app to an **existing** identity.

This guide provides an overview of how to use an identity agent to create and manage multiple identities.

<details>
<summary>Prerequisites</summary>

**Install the following packages**

```bash
npm i @web5/dids @web5/identity-agent @web5/api
```

**Import the following modules**
    
```js
import { DidIonMethod } from '@web5/dids';
import { IdentityAgent } from '@web5/identity-agent';
import { Web5, getTechPreviewDwnEndpoints } from '@web5/api';
```
    
</details>

## Initialize the Agent
To begin, create an instance of `IdentityAgent`.

<CodeSnippet functionName="createIdentityAgent" />

## Authenticate with a passphrase
For security purposes, the identity agent prompts the end user to enter a secure passphrase when it initially launches.

<CodeSnippet functionName="authenticateIdentityAgent" />

## Configure your DID
If you'd like to associate DWNs with a DID, you can do so. In the following example, we'll use the TBD-hosted DWN endpoints:

<CodeSnippet functionName="getDwnEndpoints" />

<CodeSnippet functionName="createDidOptions" />

<details>
<summary>Expected Output</summary>

    
```js
{
  keySet: { verificationMethodKeys: [ [Object], [Object] ] },
  services: [
    {
      id: '#dwn',
      serviceEndpoint: [Object],
      type: 'DecentralizedWebNode'
    }
  ]
}
```
    
</details>

## Create Identities
Now that `didOptions` contains cryptographic key pairs and service endpoints, you can create as many identities as necessary. Each identity, linked to a unique DID, represents and compartmentalizes different aspects of a user. For example, you can have a identity for social media interactions and another for professional engagements.

<CodeSnippet functionName="createSocialMediaIdentity" />

<CodeSnippet functionName="createCareerIdentity" />


:::note
* The `name` field serves as a friendly name for reference. 
* The `kms` field stands for Key Management Service and can securely store and manage the cryptographic keys associated with a DID. If you don't specify a particular key management service, such as AWS Key Management Service or Google Cloud Key Management, Web5 will default to an in-memory key manager.
:::

## Connect to Web5
To use a custom Identity Agent with Web5, pass the DID and the agent into `Web5.connect()`:

<CodeSnippet functionName="connectIdentityToWeb5" />

