---
sidebar_position: 1
---

# VCs in DWNs

In this guide, we'll cover how to write a [Verifiable Credential (VC)](/docs/web5/learn/verifiable-credentials) to a [Decentralized Web Node (DWN)](/docs/web5/learn/decentralized-web-nodes), how to query and read a VC that is stored in a DWN, and lastly how to parse the VC into a format that your application can work with.

## Storing VC in DWN

To store a VC in a DWN, you need to create a record with the VC data. The VC should already be [created](/docs/web5/build/verifiable-credentials/fan-club-vc#create-credential) and in a [signed JWT format](/docs/web5/build/verifiable-credentials/fan-club-vc#sign-credential). This is what that would look like:

```javascript
const { record } = await web5.dwn.records.create({
  data: signedVcJwt,
  message: {
    schema: 'EmploymentCredential',
    dataFormat: 'application/vc+jwt',
  },
});


// (optional) immediately send record to your remote DWNs
const { status } = await record.send(yourDid);
```

`signedVcJwt` represents a signed VC JWT. The `schema` property should be the same as the VC type, and `dataFormat` specifies the format of the VC, this will always be `application/vc+jwt`.

## Reading VC from DWN

Once the VC is stored, you can retrieve it from the DWN using the `recordId` that was created:

```javascript
let { record: readRecord } = await web5.dwn.records.read({
  message: {
    filter: {
      recordId: record.id, // this is the record ID that was logged above
    },
  },
});

const signedVcJwt = await readRecord.data.text();
console.log('\nVC Record: \n' + readVcJwt + '\n');
```

This will return your signed JWT string. If you don't have access to your VC's `recordId` you can query your DWN for the record:

## Querying VC From DWN

```javascript
const response = await web5.dwn.records.query({
  from: yourDid,
  message: {
    filter: {
      schema: 'EmploymentCredential',
      dataFormat: 'application/vc+jwt',
    },
  },
});

const signedVcJwt = await response[0].data.text();
console.log('\nVC Record: \n' + signedVcJwt + '\n');
```

This will log the first record matching the filters you specified, `schema` and `dataFormat`. Keep in mind that this will access your VC that is now a signed JWT string.

## Parsing a VC JWT

After retrieving your signed JWT string, if you would like to turn your VC back into a readable JSON object you can use the `parseJwt()` method:

```javascript
const parsedVc = VerifiableCredential.parseJwt(signedVcJwt);
console.log(JSON.stringify(parsedVc));
```

This returns:

```javascript
vcDataModel: {
  '@context': ['https://www.w3.org/2018/credentials/v1'],
  type: ['VerifiableCredential', 'EmploymentCredential'],
  id: 'urn:uuid:12345678-9abc-def0-1234-56789abcdef0',
  issuer: 'did:key:z6Mkn4w6nSaWe4fjNJRvaHZwFnMm5VexvjzDeozEu2G7jC34',
  issuanceDate: '2023-12-14T08:20:41Z',
  credentialSubject: {
    id: 'did:key:z6MkjGSeekPGE9QfczHWyW8v2ZzJU68kqSHzV7L2dmQyuyDu',
    employmentStatus: 'employed',
    company: 'TBD',
    position: 'Software Engineer'
  }
}
```
